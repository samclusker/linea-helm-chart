{{- if or .Values.besu.ingress.enabled .Values.ethstats.ingress.enabled }}
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: {{ include "linea-dev.name" . }}-ingress
  namespace: {{ include "linea-dev.namespace" . }}
  annotations:
    {{- toYaml .Values.ingress.annotations | nindent 4 }}
spec:
  ingressClassName: {{ .Values.ingress.className }}
  rules:
    {{- if .Values.besu.ingress.enabled }}
    - host: "besu.{{ .Values.global.domain }}"
      http:
        paths:
        - pathType: Prefix
          path: "/"
          backend:
            service:
              name: {{ include "linea-dev.component.name" (dict "component" "besu" "root" .) }}
              port:
                number: {{ .Values.besu.service.ports.rpc }}
    {{- end }}
    {{- if .Values.ethstats.ingress.enabled }}
    - host: "ethstats.{{ .Values.global.domain }}"
      http:
        paths:
        - pathType: Prefix
          path: "/"
          backend:
            service:
              name: {{ include "linea-dev.component.name" (dict "component" "ethstats" "root" .) }}
              port:
                number: {{ .Values.ethstats.service.ports.http }}
    {{- end }}
    {{- if .Values.serviceMonitor.enabled }}
    - host: "grafana.{{ .Values.global.domain }}"
      http:
        paths:
        - pathType: Prefix
          path: "/"
          backend:
            service:
              name: {{ include "linea-dev.component.name" (dict "component" "grafana" "root" .) }}
              port:
                number: 80
    {{- end }}
{{- end }}
